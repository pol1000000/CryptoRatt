{% extends "base.html" %}
{% load i18n %}

{% block content %}

<div class="container pt-4">
  <div class="row d-flex justify-content-center">
    <div class="alert alert-success" role="alert">
      {% if wizard.steps.current == 'welcome' %}
        {% blocktrans %}
          You are about to take your account security to the next level.
          Follow the steps in this wizard to enable two-factor authentication.
        {% endblocktrans %}
      {% elif wizard.steps.current == 'method' %}
        {% blocktrans %}
          Please select which authentication method you would like to use.
        {% endblocktrans %}
      {% elif wizard.steps.current == 'generator' %}
        {% blocktrans %}
          To start using a token generator, please use your smartphone to scan the QR code below.
          For example, use Google Authenticator.
          Then, enter the token generated by the app.
        {% endblocktrans %}
      {% elif wizard.steps.current == 'sms' %}
        {% blocktrans %}
          Please enter the phone number you wish to receive the text messages on.
          This number will be validated in the next step.
        {% endblocktrans %}
      {% elif wizard.steps.current == 'call' %}
        {% blocktrans %}
          Please enter the phone number you wish to be called on.
          This number will be validated in the next step.
        {% endblocktrans %}
      {% elif wizard.steps.current == 'validation' %}
        {% if device.method == 'call' %}
          {% blocktrans %}
            We are calling your phone right now, please enter the digits you hear.
          {% endblocktrans %}
        {% elif device.method == 'sms' %}
          {% blocktrans %}
            We sent you a text message, please enter the tokens we sent
          {% endblocktrans %}
        {% endif %}
      {% endif %}
    </div>
  </div>

  <div class="row d-flex justify-content-center"> 
    {% if  wizard.steps.current == 'generator' %}
      <img class="img-thumbnail m-4" src="{{ QR_URL }}" alt="QR Code" />
    {% endif %}
  </div>

  <div class="row d-flex justify-content-center">
    <div class="col-md-6">
      <form action="" method="post">{% csrf_token %}
        <input style="display:none" type="submit" value=""/>
        {{ wizard.management_form }}

        {% for f in wizard.form %}
          <input class="form-control mb-2" type="{{ f.field.widget.input_type }}" 
          placeholder="{{ f.name }}" name="{{ f.html_name }}" id="{{ f.id_for_label }}" autofocus required>
        {% endfor %}


        <div class="row pt-2 pb-4">
          <div class="col">
            {% if wizard.steps.prev %}
              <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}" class="btn btn-block btn-secondary">{% trans "Back" %}</button>
            {% else %}
              <button disabled name="" type="button" class="btn btn-block btn-secondary">{% trans "Back" %}</button>
            {% endif %}
          </div>
          <div class="col">
            <button type="submit" class="btn btn-block btn-primary">{% trans "Next" %}</button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>



{% endblock %}
